运算器必须有的寄存器：累加器ACC，乘商寄存器MQ，操作数寄存器X

控制器：PC IR CU控制单元

冯诺依曼机最根本的特征是存储程序原理，基本工作方式是控制流驱动

CPU不包括地址译码器，运算器不包括地址寄存器，地址寄存器在CPU内

数据库系统不属于系统软件，管理系统！

相联存储器既可以按内容又可以按地址寻址

计算机采用二进制的主要原因，包括二进制运算规则简单，真题，死背

计算机五大功能，数据传送、数据存储、数据处理、操作控制、操作判断

数据通路带宽：数据总线一次所能并行传送信息的位数

系统吞吐量主要取决于主存的存取周期

优化数据通路结构能缩短程序执行时间，真题，死背

数据字长就是数据通路带宽

时钟频率不影响CPI

存取时间，从启动存储器操作到完成的时间

存取周期，又称为读写周期或访问周期，连续两次独立访问存储器之间所需的最小间隔，进行一次完整的读写操作所需的全部时间

主存带宽，数据传输率，单位为B/s或b/s

存取周期包括存取时间和恢复时间

存储系统的效率是cache时间*1/（0.95*cache时间）+（0.05*主存时间）

集中刷新，死区

分散刷新，没有死区，周期前半部分读写，后半部分刷新某一行，加长了存取周期

异步刷新，缩短死区，刷新周期除以行数得到刷新间隔t

透明刷新，安排在译码阶段，不会加长存取周期，也不会产生死区

DRAM刷新的单位是行

读出时间，从给出有效地址开始，到读出并稳定地出现
读周期，连续两次读操作必须间隔的时间，大于等于读出时间

ROM分为掩膜式MROM，一次可编程PROM，可擦除可编程EPROM，闪存Flash，固态硬盘SSD


芯片引脚/线数目的题目，片选+读+写+地址+数据+电源+接地
地址复用时，片选为两根，即行通选和列通选
片选是选芯片的高位地址，地址线是片内地址

刷新只占用一个存取周期

刷新时间，如果题目没说，则是在2ms内刷新全部，集中刷新所需的死区=存取周期*行数

片选信号的线选法，地址空间不连续，造成地址资源的浪费，但简单
译码片选法

低位交叉存储器，只要不是0号芯片开始，就要再多一轮，真题，死背

循环就有时间局部性，现在执行的指令等下还要执行，真题，死背

计算cache位数，包括1位有效位，标记，数据长度，一致性维护位，替换算法控制位等，直接映射的cache行总数表示中间的行号有log几位，行号不占用空间，块内地址也不占空间，而是直接数据块占位

零地址运算类指令仅用在堆栈计算机，两个操作数来自栈顶和次栈顶
四地址指令的地址4是下一条要执行指令的地址

取指需要访存（或者cache）

寻址分为指令寻址和数据寻址

指令寻址：顺序寻址PC+1和跳跃寻址转移指令

隐含寻址，有利于缩短指令字长，需要增加硬件

立即寻址，地址码长度限制了立即数范围
直接寻址，地址码长度限制了寻址范围
间接寻址，主存字第一位判断是否是多次间址，扩大寻址范围
寄存器寻址
寄存器间接寻址
相对寻址
基址寻址，面向操作系统，扩大寻址范围，基址寄存器的位数大于地址码位数，有利于多道程序设计和浮动程序
变址寻址，面向用户，扩大寻址范围
堆栈寻址

特权指令通常仅用于实现系统软件

内存地址是无符号数，但相对寻址的形式地址是补码表示的有符号数

野题说变长指令码寄存器寻址最快，定长指令码立即寻址最快

CPU的功能，指令控制，操作控制，时间控制，数据加工，中断处理

标志触发器，FE取指，IND间址，EX执行，INT中断

所有指令的取指操作都是相同的，错，要在指令长度相同的时候

指令字长一般和存储字长一样大，错，一般是整数倍

CPU内部单总线，冲突多
CPU内部三总线
专用数据通路

数据通路指的是数据经过的路径，因此ALU、寄存器、异常和中断处理逻辑、Cache都属于数据通路的一部分

CU的输入信号来源，指令译码电路ID，时序信号节拍发生器，标志寄存器，系统总线上的中断、DMA等

指令微操作序列控制方式
同步，以最长的微操作序列作为标准
异步，运行快，控制电路复杂
联合，大部分同步，小部分异步

一条机器指令是一个微程序，一个微程序包含多个微指令，一个微指令包括多个微操作命令
微操作是微命令的执行过程
微指令包含操作控制字段和顺序控制字段，又称微操作码字段和微地址码字段
微周期是从控制存储器CM读取一条微指令并执行对应的微操作所需的时间
CM在CPU内部，ROM实现
注意CMAR，CMDR或μIR

微程序数至少为指令系统中的机器指令总数+1，1是公共取指微程序

直接编码快，但微指令字长过长，CM容量要求极大

字段直接编码，字段分段的原则：互斥性在同一字段，相容性在不同字段，每个段的信息位不能太多，否则译码很慢很复杂；每段要留一个状态表示不发出任何微命令

字段间接编码（隐式编码），一个字段的某些微命令可能需要另一个字段的某些微命令来解释，削弱了并行控制能力

微指令地址形成方式
下地址字段指出
根据操作码形成
增量计数器法，适用于后继微指令的地址连续的情况
根据标志决定微指令分支转移的地址
通过测试网络形成
由硬件直接产生

水平型指令，直接编码、字段直接编码、字段间接编码、混合编码都属于，短快，但微指令长，编写麻烦

垂直型微指令，微指令短，但慢，微程序长

混合型微指令，折中

每条微指令都需要增加一个将下地址字段送至CMAR的微操作，即Ad(CMDR)->CMAR
取指微程序的最后一条微指令，其后继微指令地址是由微地址形成部件形成的，即OP(IR)->微地址形成部件->CMAR

微程序控制器的时序简单，因为只要按顺序执行，硬布线的复杂，因为要设计成逻辑电路

程序状态字寄存器属于运算器

cache缺失由硬件处理，不需要异常处理程序

超标量流水线，又叫动态多发射技术，每个时钟周期发射多条指令

超标量流水线能结合动态调度技术提高指令执行并行性

超长指令字，静态多发射技术

超流水线技术，提高主频

流水线是时间并行

总线的特点是分时和共享

总线特性，机械特性，电气特性，功能特性，时间特性

片内总线，系统总线，IO总线

数据总线是双向的，地址总线是单向的

USB、PCI是IO总线，通过IO接口与系统总线连接

通信总线又叫外部总线，与其它计算机系统通信的总线

CRT是纯平显示器，真题，死背

ISA是系统总线，不是局部总线

USB是通用串行总线，PCI EISA ISA都是并行总线，PCIE是串行的，真题，死背

VESA，AGP是视频总线

USB可以通过级联连接多台外设，是一种通信总线

分离事务通信是总线复用的一种，能提高总线的利用率，真题，死背

总线之间通过桥接器相连，真题，死背

总线事务包括请求，仲裁，寻址，传输，释放

半同步通信总线既保留了同步通信的特点，又能采用异步应答方式连接设备，方式是在异步总线中引入时钟信号，就绪和应答都在时钟沿有效

PCI是半同步总线

IO接口的功能
地址译码和设备选择
实现主机和外设的通信联络控制
实现数据缓冲
信号格式转换
传送控制命令和状态信息

数据缓冲寄存器和状态/控制寄存器都在数据线上传送，且二者的方向相反，数据线传送控制命令

控制线传送仲裁信号、握手信号和读写信号

I/O指令是特权指令

磁盘驱动器不是I/O接口，打印机适配器、网络控制器、可编程中断控制器是I/O接口，真题，死背

中断隐指令包括关中断、保存断点（PC和PSW）、引出中断服务程序

识别中断源的方法，硬件向量法和软件查询法

进入中断服务程序后首先保存现场和屏蔽字，然后开中断，执行，然后关中断，恢复现场和屏蔽字，开中断，返回

DMA控制器
主存地址计数器，传送长度计数器，数据缓冲寄存器，DMA请求触发器，控制/状态逻辑，中断机构

I/O访存优先级高于CPU访存，因为I/O不立即访存有可能丢失数据
同时请求访存时称为周期挪用或周期窃取

交替访存，适用于CPU的工作周期比存取周期长的情况

对DMA请求的响应可以在每个机器周期后，而不需要在每条指令后

DMA请求的优先级高于中断请求

中断判优方式指的是I/O设备争用CPU的判优方式，野题

浮点数运算下溢直接当成0，上溢才会引起中断

用户程序需要I/O时，引起的中断是访管中断

DMA请求是外设向DMA控制器发出的，DMA控制器向CPU发总线请求

DMA响应发生在一个总线事务完成后，真题，死背
中断I/O方式不适合快速外设，而多路型DMA控制器适合为多个慢速外设服务，真题，死背
另一解释：并不是所有外设都支持中断，只有具有中断控制器的外设才适合中断，只有具有DMA接口的外设才适合DMA方式（废话）

I/O端口包括状态口和控制口，所以可以传送控制命令，真题，死背
在程序中断I/O方式中，CPU和打印机直接交换打印字符，不会传送主存地址，真题，死背

DMA传送前由设备驱动程序设置传送参数，真题，死背

时钟中断是外部中断，真题，死背

周期挪用DMA方式每准备好一个数据缓冲寄存器大小的数据，DMA控制器就发出一次总线请求，真题，死背

异步串行通信有起始位，校验位，停止位

从I/O中断请求到CPU响应中断这段时间也算CPU花费的时间，真题，死背